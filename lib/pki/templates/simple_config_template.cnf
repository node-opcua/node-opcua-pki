########################################################################################################################
## SIMPLE OPENSSL CONFIG FILE FOR SELF-SIGNED CERTIFICATE GENERATION
########################################################################################################################

distinguished_name       = req_distinguished_name
# default_md               = sha1
default_md                = sha256                      # The default digest algorithm

[ v3_ca ]
subjectKeyIdentifier        = hash
authorityKeyIdentifier      = keyid:always,issuer:always
# authorityKeyIdentifier    = keyid
basicConstraints            = CA:TRUE
keyUsage                    = critical, cRLSign, keyCertSign
nsComment                   = "SelfSigned Certificate generated by Node-OPCUA Certificate utility using openssl"
#nsCertType                 = sslCA, emailCA
#subjectAltName             = email:copy
#issuerAltName              = issuer:copy
#obj                        = DER:02:03
# crlDistributionPoints       = @crl_info
# [ crl_info ]
# URI.0                     = http://localhost:8900/crl.pem
subjectAltName            = @alt_names

[ alt_names ]
URI                       = $ENV::ALTNAME_URI
DNS.0                     = $ENV::ALTNAME_DNS
DNS.1                     = $ENV::ALTNAME_DNS_1
DNS.2                     = $ENV::ALTNAME_DNS_2
DNS.3                     = $ENV::ALTNAME_DNS_3
DNS.4                     = $ENV::ALTNAME_DNS_4
#IP.0                      = $ENV::ALTNAME_IP
#IP.1                      = $ENV::ALTNAME_IP_1
#IP.2                      = $ENV::ALTNAME_IP_2
#IP.3                      = $ENV::ALTNAME_IP_3
#IP.4                      = $ENV::ALTNAME_IP_4

[ req ]
days                      = 390
req_extensions            = v3_req
x509_extensions           = v3_ca

[v3_req]
basicConstraints       = CA:false
keyUsage               = critical, cRLSign, keyCertSign
subjectAltName         = @alt_names

[ v3_selfsigned]
basicConstraints          = critical, CA:FALSE
keyUsage                  = nonRepudiation, digitalSignature, keyEncipherment, dataEncipherment, keyAgreement
nsComment                 = "Self-signed certificate"
subjectAltName            = @alt_names

[ req_distinguished_name ]
countryName             = Country Name (2 letter code)
countryName_default     = FR
countryName_min         = 2
countryName_max         = 2
# stateOrProvinceName     = State or Province Name (full name)
# stateOrProvinceName_default = Ile de France
# localityName            = Locality Name (city, district)
# localityName_default    = Paris
organizationName          = Organization Name (company)
organizationName_default  = NodeOPCUA
# organizationalUnitName  = Organizational Unit Name (department, division)
# organizationalUnitName_default = R&D
commonName                = Common Name (hostname, FQDN, IP, or your name)
commonName_max            = 256
commonName_default        = NodeOPCUA
# emailAddress            = Email Address
# emailAddress_max        = 40
# emailAddress_default    = node-opcua (at) node-opcua (dot) com
subjectAltName            = @alt_names
